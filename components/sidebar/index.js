import Link from "next/link";
import { useRouter } from "next/router";
import { Fragment, useEffect } from "react";
import { connect } from "react-redux";
import Cookies from "universal-cookie";
import { getCurrentPlanInfoAction } from "../../redux/actions/home";

const cookie = new Cookies();
const SidebarMenu = (props) => {
  const router = useRouter();
  const logoutHandler = () => {
    cookie.remove("user_token", {
      path: "/",
      expires: new Date(Date.now() + 2592000111),
    });
    cookie.remove("user_info", {
      path: "/",
      expires: new Date(Date.now() + 2592000111),
    });
    setTimeout(() => {
      router.reload();
    }, 1200);
    router.push("/");
  };
  useEffect(() => {
    props.getCurrentPlanInfoAction();
  }, []);
 
  return (
    <Fragment>
      <div
        onClick={() => props.setOpenSidebar(false)}
        className={`menubackdrop ${props.onOpenSidebar ? "active" : ""}`}
      ></div>
      <div
        className={`sidebar-main-wrap ${props.onOpenSidebar ? "active" : ""}`}
      >
        <Link href="/">
          <a className="logo">
            <img src="/images/logo.svg" alt="logo" />
          </a>
        </Link>
        <ul className="sidebar-wrap">
          <li>
            <Link href="/dashboard">
              <a className={router.pathname == "/dashboard" ? "active" : ""}>
                <svg
                  width="19"
                  height="20"
                  viewBox="0 0 19 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  className="icon"
                >
                  <path
                    d="M16.8889 2.22222V4.44444H12.6667V2.22222H16.8889ZM6.33333 2.22222V8.88889H2.11111V2.22222H6.33333ZM16.8889 11.1111V17.7778H12.6667V11.1111H16.8889ZM6.33333 15.5556V17.7778H2.11111V15.5556H6.33333ZM19 0H10.5556V6.66667H19V0ZM8.44444 0H0V11.1111H8.44444V0ZM19 8.88889H10.5556V20H19V8.88889ZM8.44444 13.3333H0V20H8.44444V13.3333Z"
                    fill="#002D5C"
                  />
                </svg>
                <span className="name">Dashboard</span>
              </a>
            </Link>
          </li>
          <li>
            <Link href="/markets">
              <a className={router.pathname == "/markets" ? "active" : ""}>
                <svg
                  width="21"
                  height="18"
                  viewBox="0 0 21 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  className="icon stroke"
                >
                  <path
                    d="M1.14176 16.2922L6.73278 10.3438L9.75421 13.3905L13.447 9.99071L15.5041 12.1031M19.4577 2.73649C19.4577 2.3517 19.3125 1.98267 19.0542 1.71059C18.7959 1.4385 18.4455 1.28564 18.0801 1.28564H2.46788C2.10253 1.28564 1.75215 1.4385 1.49381 1.71059C1.23547 1.98267 1.09033 2.3517 1.09033 2.73649V7.08902H19.4577V2.73649Z"
                    stroke="#002D5C"
                    strokeWidth="1.5"
                    strokeLinejoin="round"
                    strokeLinecap="round"
                  />
                  <path
                    d="M19.4577 6.12172V15.3104C19.4577 15.6952 19.3125 16.0642 19.0542 16.3363C18.7959 16.6084 18.4455 16.7612 18.0801 16.7612H4.7638M8.02952 4.18726H16.2948M4.35513 4.18726H5.2735M1.09033 6.12172V10.4743"
                    stroke="#002D5C"
                    strokeWidth="1.5"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                </svg>

                <span className="name">Markets</span>
              </a>
            </Link>
          </li>
          {props.current_plan_info?.is_universal != "No" ? (
            <li>
              <Link href="/market-overview">
                <a
                  className={
                    router.pathname == "/market-overview" ? "active" : ""
                  }
                >
                  <svg
                    width="19"
                    height="17"
                    viewBox="0 0 19 17"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    className="icon"
                  >
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M2.03571 5.46429V1.82143H6.10714V5.46429H2.03571ZM0 1.21429C0 0.892237 0.142984 0.583379 0.397498 0.355656C0.652012 0.127933 0.997206 0 1.35714 0H6.78571C7.14565 0 7.49085 0.127933 7.74536 0.355656C7.99987 0.583379 8.14286 0.892237 8.14286 1.21429V6.07143C8.14286 6.39348 7.99987 6.70234 7.74536 6.93006C7.49085 7.15778 7.14565 7.28571 6.78571 7.28571H1.35714C0.997206 7.28571 0.652012 7.15778 0.397498 6.93006C0.142984 6.70234 0 6.39348 0 6.07143V1.21429ZM10.8571 1.51786C10.8571 1.27632 10.9644 1.04468 11.1553 0.873885C11.3462 0.703093 11.605 0.607143 11.875 0.607143H17.9821C18.2521 0.607143 18.511 0.703093 18.7019 0.873885C18.8928 1.04468 19 1.27632 19 1.51786C19 1.75939 18.8928 1.99104 18.7019 2.16183C18.511 2.33262 18.2521 2.42857 17.9821 2.42857H11.875C11.605 2.42857 11.3462 2.33262 11.1553 2.16183C10.9644 1.99104 10.8571 1.75939 10.8571 1.51786ZM11.875 4.85714C11.605 4.85714 11.3462 4.95309 11.1553 5.12388C10.9644 5.29468 10.8571 5.52632 10.8571 5.76786C10.8571 6.00939 10.9644 6.24104 11.1553 6.41183C11.3462 6.58262 11.605 6.67857 11.875 6.67857H17.9821C18.2521 6.67857 18.511 6.58262 18.7019 6.41183C18.8928 6.24104 19 6.00939 19 5.76786C19 5.52632 18.8928 5.29468 18.7019 5.12388C18.511 4.95309 18.2521 4.85714 17.9821 4.85714H11.875ZM2.03571 11.5357V15.1786H6.10714V11.5357H2.03571ZM1.35714 9.71429C0.997206 9.71429 0.652012 9.84222 0.397498 10.0699C0.142984 10.2977 0 10.6065 0 10.9286V15.7857C0 16.1078 0.142984 16.4166 0.397498 16.6443C0.652012 16.8721 0.997206 17 1.35714 17H6.78571C7.14565 17 7.49085 16.8721 7.74536 16.6443C7.99987 16.4166 8.14286 16.1078 8.14286 15.7857V10.9286C8.14286 10.6065 7.99987 10.2977 7.74536 10.0699C7.49085 9.84222 7.14565 9.71429 6.78571 9.71429H1.35714ZM11.875 10.3214C11.605 10.3214 11.3462 10.4174 11.1553 10.5882C10.9644 10.759 10.8571 10.9906 10.8571 11.2321C10.8571 11.4737 10.9644 11.7053 11.1553 11.8761C11.3462 12.0469 11.605 12.1429 11.875 12.1429H17.9821C18.2521 12.1429 18.511 12.0469 18.7019 11.8761C18.8928 11.7053 19 11.4737 19 11.2321C19 10.9906 18.8928 10.759 18.7019 10.5882C18.511 10.4174 18.2521 10.3214 17.9821 10.3214H11.875ZM11.875 14.5714C11.605 14.5714 11.3462 14.6674 11.1553 14.8382C10.9644 15.009 10.8571 15.2406 10.8571 15.4821C10.8571 15.7237 10.9644 15.9553 11.1553 16.1261C11.3462 16.2969 11.605 16.3929 11.875 16.3929H17.9821C18.2521 16.3929 18.511 16.2969 18.7019 16.1261C18.8928 15.9553 19 15.7237 19 15.4821C19 15.2406 18.8928 15.009 18.7019 14.8382C18.511 14.6674 18.2521 14.5714 17.9821 14.5714H11.875Z"
                      fill="#002D5C"
                    />
                  </svg>
                  <span className="name">Market Overview</span>
                </a>
              </Link>
            </li>
          ) : null}

          <li>
            <Link href="/update-schedule">
              <a
                className={
                  router.pathname == "/update-schedule" ? "active" : ""
                }
              >
                <svg
                  width="19"
                  height="17"
                  viewBox="0 0 19 17"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  className="icon"
                >
                  <path
                    fillRule="evenodd"
                    clipRule="evenodd"
                    d="M2.03571 5.46429V1.82143H6.10714V5.46429H2.03571ZM0 1.21429C0 0.892237 0.142984 0.583379 0.397498 0.355656C0.652012 0.127933 0.997206 0 1.35714 0H6.78571C7.14565 0 7.49085 0.127933 7.74536 0.355656C7.99987 0.583379 8.14286 0.892237 8.14286 1.21429V6.07143C8.14286 6.39348 7.99987 6.70234 7.74536 6.93006C7.49085 7.15778 7.14565 7.28571 6.78571 7.28571H1.35714C0.997206 7.28571 0.652012 7.15778 0.397498 6.93006C0.142984 6.70234 0 6.39348 0 6.07143V1.21429ZM10.8571 1.51786C10.8571 1.27632 10.9644 1.04468 11.1553 0.873885C11.3462 0.703093 11.605 0.607143 11.875 0.607143H17.9821C18.2521 0.607143 18.511 0.703093 18.7019 0.873885C18.8928 1.04468 19 1.27632 19 1.51786C19 1.75939 18.8928 1.99104 18.7019 2.16183C18.511 2.33262 18.2521 2.42857 17.9821 2.42857H11.875C11.605 2.42857 11.3462 2.33262 11.1553 2.16183C10.9644 1.99104 10.8571 1.75939 10.8571 1.51786ZM11.875 4.85714C11.605 4.85714 11.3462 4.95309 11.1553 5.12388C10.9644 5.29468 10.8571 5.52632 10.8571 5.76786C10.8571 6.00939 10.9644 6.24104 11.1553 6.41183C11.3462 6.58262 11.605 6.67857 11.875 6.67857H17.9821C18.2521 6.67857 18.511 6.58262 18.7019 6.41183C18.8928 6.24104 19 6.00939 19 5.76786C19 5.52632 18.8928 5.29468 18.7019 5.12388C18.511 4.95309 18.2521 4.85714 17.9821 4.85714H11.875ZM2.03571 11.5357V15.1786H6.10714V11.5357H2.03571ZM1.35714 9.71429C0.997206 9.71429 0.652012 9.84222 0.397498 10.0699C0.142984 10.2977 0 10.6065 0 10.9286V15.7857C0 16.1078 0.142984 16.4166 0.397498 16.6443C0.652012 16.8721 0.997206 17 1.35714 17H6.78571C7.14565 17 7.49085 16.8721 7.74536 16.6443C7.99987 16.4166 8.14286 16.1078 8.14286 15.7857V10.9286C8.14286 10.6065 7.99987 10.2977 7.74536 10.0699C7.49085 9.84222 7.14565 9.71429 6.78571 9.71429H1.35714ZM11.875 10.3214C11.605 10.3214 11.3462 10.4174 11.1553 10.5882C10.9644 10.759 10.8571 10.9906 10.8571 11.2321C10.8571 11.4737 10.9644 11.7053 11.1553 11.8761C11.3462 12.0469 11.605 12.1429 11.875 12.1429H17.9821C18.2521 12.1429 18.511 12.0469 18.7019 11.8761C18.8928 11.7053 19 11.4737 19 11.2321C19 10.9906 18.8928 10.759 18.7019 10.5882C18.511 10.4174 18.2521 10.3214 17.9821 10.3214H11.875ZM11.875 14.5714C11.605 14.5714 11.3462 14.6674 11.1553 14.8382C10.9644 15.009 10.8571 15.2406 10.8571 15.4821C10.8571 15.7237 10.9644 15.9553 11.1553 16.1261C11.3462 16.2969 11.605 16.3929 11.875 16.3929H17.9821C18.2521 16.3929 18.511 16.2969 18.7019 16.1261C18.8928 15.9553 19 15.7237 19 15.4821C19 15.2406 18.8928 15.009 18.7019 14.8382C18.511 14.6674 18.2521 14.5714 17.9821 14.5714H11.875Z"
                    fill="#002D5C"
                  />
                </svg>
                <span className="name">Update Schedule</span>
              </a>
            </Link>
          </li>
          <li>
            <Link href="/plan-management">
              <a
                className={router.asPath == "/plan-management" ? "active" : ""}
              >
                <svg
                  width="24"
                  height="25"
                  viewBox="0 0 24 25"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  className="icon"
                >
                  <path
                    d="M9 3.125C9.74168 3.125 10.4667 3.3541 11.0834 3.78332C11.7001 4.21255 12.1807 4.82262 12.4645 5.53639C12.7484 6.25017 12.8226 7.03558 12.6779 7.79332C12.5333 8.55106 12.1761 9.24709 11.6517 9.79339C11.1272 10.3397 10.459 10.7117 9.73159 10.8624C9.00416 11.0132 8.25016 10.9358 7.56494 10.6402C6.87971 10.3445 6.29404 9.84383 5.88199 9.20145C5.46993 8.55907 5.25 7.80383 5.25 7.03125C5.25 5.99525 5.64509 5.00168 6.34835 4.26911C7.05161 3.53655 8.00544 3.125 9 3.125ZM9 1.5625C7.96165 1.5625 6.94661 1.88324 6.08326 2.48415C5.2199 3.08506 4.54699 3.93917 4.14963 4.93845C3.75227 5.93773 3.6483 7.03732 3.85088 8.09815C4.05345 9.15898 4.55346 10.1334 5.28769 10.8982C6.02191 11.6631 6.95738 12.1839 7.97578 12.3949C8.99418 12.6059 10.0498 12.4976 11.0091 12.0837C11.9684 11.6698 12.7883 10.9689 13.3652 10.0695C13.9421 9.17019 14.25 8.11287 14.25 7.03125C14.25 5.58085 13.6969 4.18985 12.7123 3.16426C11.7277 2.13867 10.3924 1.5625 9 1.5625ZM16.5 23.4375H15V19.5312C15 18.4952 14.6049 17.5017 13.9017 16.7691C13.1984 16.0366 12.2446 15.625 11.25 15.625H6.75C5.75544 15.625 4.80161 16.0366 4.09835 16.7691C3.39509 17.5017 3 18.4952 3 19.5312V23.4375H1.5V19.5312C1.5 18.0808 2.05312 16.6898 3.03769 15.6643C4.02226 14.6387 5.35761 14.0625 6.75 14.0625H11.25C12.6424 14.0625 13.9777 14.6387 14.9623 15.6643C15.9469 16.6898 16.5 18.0808 16.5 19.5312V23.4375ZM16.5 3.125H24V4.6875H16.5V3.125ZM16.5 7.03125H24V8.59375H16.5V7.03125ZM16.5 10.9375H21.75V12.5H16.5V10.9375Z"
                    fill="#002D5C"
                  />
                </svg>

                <span className="name">Account</span>
              </a>
            </Link>
          </li>
          <li>
            <a onClick={logoutHandler}>
              <svg
                width="24"
                height="23"
                viewBox="0 0 24 23"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                className="icon"
              >
                <path
                  d="M1.61536 2.11951H14.2101V9.8338H15.7845V2.11951C15.7845 1.70197 15.6186 1.30153 15.3233 1.00628C15.0281 0.711034 14.6277 0.545166 14.2101 0.545166H1.61536C1.19782 0.545166 0.797377 0.711034 0.50213 1.00628C0.206883 1.30153 0.0410156 1.70197 0.0410156 2.11951V21.0116C0.0410156 21.4292 0.206883 21.8296 0.50213 22.1249C0.797377 22.4201 1.19782 22.586 1.61536 22.586H14.2101C14.6277 22.586 15.0281 22.4201 15.3233 22.1249C15.6186 21.8296 15.7845 21.4292 15.7845 21.0116H1.61536V2.11951Z"
                  fill="#002D5C"
                />
                <path
                  d="M18.385 10.1777C18.2295 10.0506 18.0295 9.98425 17.825 9.99179C17.6204 9.99933 17.4264 10.0802 17.2816 10.2184C17.1369 10.3565 17.0521 10.5416 17.0442 10.7368C17.0363 10.932 17.1059 11.1228 17.239 11.2712L19.9862 13.8382H8.20096C7.9854 13.8382 7.77866 13.9199 7.62624 14.0654C7.47382 14.2108 7.38818 14.4081 7.38818 14.6138C7.38818 14.8195 7.47382 15.0167 7.62624 15.1622C7.77866 15.3076 7.9854 15.3893 8.20096 15.3893H19.9862L17.239 18.0727C17.1539 18.1422 17.0848 18.2278 17.036 18.324C16.9873 18.4202 16.9598 18.525 16.9555 18.6318C16.9512 18.7386 16.9701 18.8451 17.0109 18.9446C17.0518 19.0442 17.1138 19.1345 17.193 19.2101C17.2722 19.2857 17.3669 19.3448 17.4712 19.3838C17.5755 19.4228 17.6871 19.4408 17.7991 19.4367C17.911 19.4326 18.0208 19.4064 18.1217 19.3599C18.2225 19.3133 18.3122 19.2474 18.385 19.1662L23.1316 14.6681L18.385 10.1777Z"
                  fill="#002D5C"
                />
              </svg>

              <span className="name">Logout</span>
            </a>
          </li>
        </ul>
      </div>
    </Fragment>
  );
};
const mapStateToProps = (state) => ({
  current_plan_info: state.home.current_plan_info,
});
export default connect(mapStateToProps, {
  getCurrentPlanInfoAction,
})(SidebarMenu);
